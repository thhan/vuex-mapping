'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _set=require('babel-runtime/core-js/reflect/set'),_set2=_interopRequireDefault(_set),_get=require('babel-runtime/core-js/reflect/get'),_get2=_interopRequireDefault(_get),_assign=require('babel-runtime/core-js/object/assign'),_assign2=_interopRequireDefault(_assign),_typeof2=require('babel-runtime/helpers/typeof'),_typeof3=_interopRequireDefault(_typeof2),_defineProperty2=require('babel-runtime/helpers/defineProperty'),_defineProperty3=_interopRequireDefault(_defineProperty2),_extends3=require('babel-runtime/helpers/extends'),_extends4=_interopRequireDefault(_extends3);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var mapping=function(a){a.subscribe(function(b){'save'!==b.type&&a.dispatch('__save',b.payload)}),a.subscribeAction(function(b){'__save'!==b.type&&(b.payload=a.dispatch('__save',b.payload))}),a.registerModule('__mapping',{mutations:{save:function d(a,b){var c=b.__typename;a[c]||(a[c]={}),a[c]=(0,_extends4.default)({},a[c],(0,_defineProperty3.default)({},b.id,(0,_extends4.default)({},a[c][b.id],b)))}},actions:{__save:function j(a,b){var c=a.commit,d=a.state,e=function(a){return'object'===('undefined'==typeof a?'undefined':(0,_typeof3.default)(a))&&null!==a&&a.hasOwnProperty('__typename')&&a.hasOwnProperty('id')},f=function(a){for(var g in a)if(e(a[g])){var b=a[g];d[b.__typename]&&d[b.__typename][b.id]?b!==d[b.__typename][b.id]&&c('save',(0,_assign2.default)(d[b.__typename][b.id],f(b))):c('save',f(b))}return a},g={get:function f(a,b){var c=a[b];return e(c)?d[c.__typename][c.id]:_get2.default.apply(Reflect,arguments)},set:function a(){return _set2.default.apply(Reflect,arguments)}};if(!e(b)&&!Array.isArray(b))return b;var h=b;for(var k in Array.isArray(b)||(h=[b]),h){var i=h[k];e(i)&&(i=new Proxy(f(i),g),c('save',i),h[k]=i)}return Array.isArray(b)?h:h[0]}}})};exports.default=mapping;
